如何快速收集执行脚本的清单
执行的脚本总要人工执行，是否可以通过机器执行
执行的脚本是否已经在数据库执行过
执行的脚本是否全部在数据库中执行过
执行的脚本如何回退
如何初始化一个空数据库实例
Flyway是一款数据库版本控制管理工具，它可以简单的、可靠的升级你的数据库。
它能帮助解决上面的问题。 Flyway核心是记录所有版本演化和状态的MetaData，
首次启动创建默认名为SCHEMA_VERSION的元素表。
表中保存了版本，描述，要执行的sql脚本等信息。

Flyway已经支持数据库包括:Oracle, SQL Server, SQL Azure, DB2, DB2 z/OS,
MySQL (including Amazon RDS), MariaDB, Google Cloud SQL,
PostgreSQL (including Amazon RDS and Heroku), Redshift,
Vertica, H2, Hsql, Derby, SQLite, SAP HANA, solidDB,
Sybase ASE and Phoeni

官网链接：https://flywaydb.org/


Flyway 的迁移类型
版本迁移
最常见的迁移就是就是版本化迁移，每次迁移都会对应的迁移版本，迁移的版本必须全局唯一，版本迁移最大的特点就是依次只被执行依次。
撤销迁移
每个撤销迁移都对应的一个版本迁移，也就是说撤销迁移是针对版本迁移所存在的，每一个撤销迁移与版本迁移都是一一对应的，而且对应的版本号必须一致。
可重复迁移
可重复迁移有描述和校验码，但是没有版本号，程序在每次启动的时候，如果发现脚本文件有变化就会执行。
基于 SQL 的迁移
上面提到的几种类型都是基于 SQL 文件来执行的，只不过每种类型的命名格式不一样，下图是从官网上截下来的，大家看下每种类型的文件应该按照如下的格式去命令，其中的 Separator 是两个下划线。

主要分为下面几个部分：
prefix：前缀，不同的类型采用不同的前缀，版本迁移使用 V，撤销迁移使用 U，可重复迁移使用 R，当然这些都是可配置的；
Version：版本号，可以使用点符号或者单下划线链接；
Separator：分隔符，两个下划线，也是可以配置的；
Description：版本描述可以用下划线和空格分隔；
Suffix：后缀，一般都是 .sql




总结
使用Flyway之前部署脚本方式一般为开发人员按照顺序汇总数据库的升级脚， 然后DBA或者售后在生产库中按照顺序执行升级脚本。
使用Flyway之后部署脚本方式就变更为开发人员将脚本构建到程序包中， 部署程序包后启动时Flyway自动执行脚本升级